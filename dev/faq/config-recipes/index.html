<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuring Logging in Applications? · Memento.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../../assets/invenia.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Memento.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../../man/intro/">Introduction</a></li><li><a class="toctext" href="../../man/loggers/">Loggers</a></li><li><a class="toctext" href="../../man/handlers/">Handlers</a></li><li><a class="toctext" href="../../man/formatters/">Formatters</a></li><li><a class="toctext" href="../../man/records/">Records</a></li><li><a class="toctext" href="../../man/io/">IO</a></li><li><a class="toctext" href="../../man/conclusion/">Conclusion</a></li></ul></li><li><span class="toctext">FAQ</span><ul><li><a class="toctext" href="../another-logging-lib/">Another logging library?</a></li><li><a class="toctext" href="../change-colors/">Changing colors?</a></li><li class="current"><a class="toctext" href>Configuring Logging in Applications?</a><ul class="internal"><li><a class="toctext" href="#Logging-to-a-File-1">Logging to a File</a></li><li><a class="toctext" href="#Silence-Loggers-1">Silence Loggers</a></li><li><a class="toctext" href="#Selective-Debugging-1">Selective Debugging</a></li><li><a class="toctext" href="#Integration-with-Base-Julia-Logging-1">Integration with Base Julia Logging</a></li></ul></li><li><a class="toctext" href="../logging-to-syslog/">Logging to Syslog?</a></li><li><a class="toctext" href="../json-formatting/">Producing JSON logs?</a></li><li><a class="toctext" href="../pkg-usage/">Using Memento in Julia packages?</a></li><li><a class="toctext" href="../testing/">How do I test my logging behaviour?</a></li></ul></li><li><a class="toctext" href="../../api/">API</a></li><li><a class="toctext" href="../../contributing/">Contributing</a></li></ul></nav><article id="docs"><header><nav><ul><li>FAQ</li><li><a href>Configuring Logging in Applications?</a></li></ul><a class="edit-page" href="https://github.com/invenia/Memento.jl/blob/master/docs/src/faq/config-recipes.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Configuring Logging in Applications?</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="config_recipes-1" href="#config_recipes-1">Configuring Logging in Applications?</a></h1><p>So we&#39;ve provided examples of many different ways that Memento.jl can be extended, but what are some common examples for configuring Memento out of the box, without extending any components.</p><h2><a class="nav-anchor" id="Logging-to-a-File-1" href="#Logging-to-a-File-1">Logging to a File</a></h2><p>I want all my log messages coming from <code>MyPkg</code> to be saved to a local file. Easy, just add a <code>DefaultHandler</code> with the desired filename to the specific child logger.</p><pre><code class="language-julia">push!(getlogger(&quot;MyPkg&quot;), DefaultHandler(&quot;noisy.log&quot;))</code></pre><p>If you want <code>trace</code> and <code>debug</code> level logging as well then just set the level on that logger.</p><pre><code class="language-julia">setlevel!(getlogger(&quot;MyPkg&quot;), &quot;trace&quot;)</code></pre><p>This will send trace messages to all handlers attached to the <code>MyPkg</code> logger, but these want be emitted from the root logger where the default level is <code>info</code>.</p><h2><a class="nav-anchor" id="Silence-Loggers-1" href="#Silence-Loggers-1">Silence Loggers</a></h2><p>Have some noisy dependencies that you&#39;d like to silence? Maybe the package owner needs to make some <code>info</code> messages <code>debug</code> only? Until that&#39;s fixed you can always silence <code>info</code> logs from the package in you application.</p><pre><code class="language-julia">setlevel!(getlogger(&quot;NoisyPkg&quot;), &quot;notice&quot;)</code></pre><p>All <code>trace</code>, <code>debug</code> and <code>info</code> messages from <code>NoisyPkg</code> and submodules will no longer propagate to the root logger and emit logs to the console.</p><h2><a class="nav-anchor" id="Selective-Debugging-1" href="#Selective-Debugging-1">Selective Debugging</a></h2><p>Found a bug and need to enable selective debug logging around where the error occurs? There are two ways you can do this in Memento. The simplest option is to call <code>setlevel!</code> for all loggers along the desired path.</p><pre><code class="language-julia">setlevel!.(Memento.getpath(getlogger(&quot;MyPkg&quot;)), &quot;debug&quot;)</code></pre><p>In this example, <code>Logger(root)</code> and <code>Logger(MyPkg)</code> are now set to <code>debug</code>, and debugging messages will propagate along that path to the root default handler.</p><p>Pros:</p><ul><li>Reuses the root default handler</li><li>Single line of code</li><li>Enables debug logging for related loggers (e.g., parents)</li></ul><p>Cons:</p><ul><li>May produce too much noisy if you don&#39;t want debug message from parents.</li></ul><p>Alternatively, if you want only debug level messages for a specific logger and you don&#39;t want any extra logs from the parents then you&#39;ll need to modify that logger&#39;s level and add a custom handler.</p><pre><code class="language-julia">mypkg_logger = getlogger(&quot;MyPkg&quot;)
setlevel!(mypkg_logger, &quot;debug&quot;)
handler = DefaultHandler(
    stdout,
    DefaultFormatter(&quot;[{date} | {level} | {name}]: {msg}&quot;)
)
push!(mypkg_logger, handler)</code></pre><p>This will log all debug or higher messages to this new custom handler.</p><p>NOTE: This may result in duplicate logs as the custom handler will emit <code>info</code>, <code>notice</code>, <code>warn</code>, etc logs, but those will also propagate up to the root logger. To avoid this you may wish to add a custom filter to your custom handler to only log debug messages.</p><pre><code class="language-julia">push!(handler, Memento.Filter(r -&gt; getlevel(r) == &quot;debug&quot;))</code></pre><p>Pros:</p><ul><li>Fine grained control over debug message handling</li><li>Flexible filtering options</li></ul><p>Cons:</p><ul><li>Verbose</li><li>Requires greater understanding of the logger hierarchy and record propagation</li></ul><h2><a class="nav-anchor" id="Integration-with-Base-Julia-Logging-1" href="#Integration-with-Base-Julia-Logging-1">Integration with Base Julia Logging</a></h2><p>Want to use Memento&#39;s logger hierarchy, formatter, filters or handlers with the base logging macros (e.g., <code>@info</code>, <code>@warn</code>)? You just need to pass <code>substitute=true</code> to <code>Memento.config!</code> and Memento will start intercepting any logs generated by those macros.</p><pre><code class="language-julia">Memento.config!(&quot;info&quot;; fmt=&quot;[{date} | {level} | {name}]: {msg}&quot;, substitute=true)
@info(&quot;Hello World!&quot;)</code></pre><footer><hr/><a class="previous" href="../change-colors/"><span class="direction">Previous</span><span class="title">Changing colors?</span></a><a class="next" href="../logging-to-syslog/"><span class="direction">Next</span><span class="title">Logging to Syslog?</span></a></footer></article></body></html>
